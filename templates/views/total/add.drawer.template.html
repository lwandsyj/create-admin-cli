<template>
    <div>
        <Drawer  title="title" :value.sync="visible" width="50%" @on-close="onCancel">
            <Form ref="ruleForm" :model="form" :rules="rules" :label-width="80">
                <FormItem label="用户名" prop="username">
                    <Input v-model="form.username" :disabled="false"></Input>
                </FormItem>
                <FormItem label="密 码">
                    <Input v-model="form.password"></Input>
                </FormItem>
                <FormItem label="手机号码" prop="mobile">
                    <Input v-model="form.mobile"></Input>
                </FormItem>
                <FormItem label="姓 名">
                    <Input v-model="form.fullname" :disabled="false"></Input>
                </FormItem>
                <FormItem label="邮 箱" prop="email">
                    <Input v-model="form.email"></Input>
                </FormItem>
                <FormItem label="角 色" prop="roles">
                    <CheckboxGroup v-model="form.roles">
                        <Checkbox v-for="role in roles" :label="role.id" :key="role.id">{{role.name}}</Checkbox>
                    </CheckboxGroup>
                </FormItem>
            </Form>
            <div  class="drawer-footer">
                <Button @click="onCancel">取 消</Button>
                <Button type="primary" @click="onSubmit">确 定</Button>
            </div>
        </Drawer >
    </div>
</template>
<script>/* eslint-disable */
export default {
    data(){
        return {
            form: {
                email: '',
                fullname: '',
                mobile: '',
                roles: [],
                password: '',
                username: ''
            },
            rules: {
                username: [
                    {required: true, message: '请输入用户名', trigger: 'blur'}
                ],
                password: [
                    {required: true, message: '请输入用户密码', trigger: 'blur'}
                ],
                roles: [
                    {type: 'array', required: true, message: '请至少选择一个角色', trigger: 'change'}
                ],
                mobile: [
                    {required: true, message: '请输入手机号码', trigger: 'blur'}
                ],
                email: [
                    {type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur'}
                ]
            },
            roles: []
        }
    },
    props: {
        visible: {
            default: false
        },
        type:{
            default:'add'
        }
    },
    methods: {
        onCancel(){
            this.$emit('update:visible', false)
        },
        onSubmit(){
            this.$refs['ruleForm'].validate((valid) => {
                if (valid) {
                    this.save();
                }
            });
        },
        save (){

        }
    },
    created(){
        console.log('edit created')
    },
    watch:{
        type(val,oldval){
            console.log(val)
            console.log(oldval)
        }
    }
}
</script>
<style>
    .drawer-footer{
        width: 100%;
        position: absolute;
        bottom: 0;
        left: 0;
        border-top: 1px solid #e8e8e8;
        padding: 10px 16px;
        text-align: right;
        background: #fff;
    }
</style>
